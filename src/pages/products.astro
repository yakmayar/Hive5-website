---
import BaseLayout from '../layouts/BaseLayout.astro';

const products = [
  { 
    id: 1, 
    image: '/images/bottle.jpg', 
    title: 'Liquid Honey<br>(Bottle)', 
    description: 'Raw, unfiltered honey in a 1lb. plastic bottle. Perfect for drizzling over toast, yogurt, or tea!'
  },
  { 
    id: 2, 
    image: '/images/honey-jar-dipper.jpg', 
    title: 'Liquid Honey<br>(with dipper)', 
    description: 'A larger, glass jar with a convenient wooden honey dipper. Elegant and a perfect gift!'
  },
  { 
    id: 3, 
    image: '/images/creamed-honey.jpg', 
    title: 'Creamed Honey', 
    description: 'Smooth creamed honey with a rich and thick texture. Perfect for spreading on bread!'
  },
  { 
    id: 4, 
    image: '/images/lip-balm.jpg',
    title: 'Lip Balm', 
    description: 'Lip Balm made with Organic Virgin Coconut Oil, Beeswax from our bees, Cocoa Butter, Extra Virgin Olive Oil, Sweet Almond Oil, Jojoba Oil, Vitamin E, Lanolin, and Flavoring Oil. It comes in a 1oz. reusable tin.'
  }
];

const productionImages = [
  { id: 1, image: '/images/product1.jpg', alt: 'Production process 1' },
  { id: 2, image: '/images/product2.jpg', alt: 'Production process 2' },
  { id: 3, image: '/images/product3.jpg', alt: 'Production process 3' },
  { id: 4, image: '/images/product4.jpg', alt: 'Production process 4' },
  { id: 5, image: '/images/product5.jpg', alt: 'Production process 5' }
];
---

<BaseLayout title="Products">
  <div class="min-h-screen bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50 bee-cursor">
    <!-- Animated Background Pattern -->
    <div class="fixed inset-0 opacity-10 pointer-events-none">
      <div class="absolute inset-0 bg-pattern"></div>
    </div>

    <!-- Hero Section with Logo and Title -->
    <header class="relative flex flex-col items-center justify-start overflow-hidden pt-8 pb-0" style="min-height: 200px;">
      <div class="absolute inset-0 bg-gradient-to-b from-black/60 via-black/40 to-transparent z-10"></div>
      
      <div class="relative z-20 w-full max-w-7xl px-8">
        <div class="flex justify-between items-center">
          <div>
            <h1 class="text-5xl font-bold text-amber-800 mb-2">Our Products</h1>
            <div class="w-24 h-1 bg-amber-500"></div>
          </div>
          
          <img 
            src="/images/logo.png" 
            alt="Hive Five Apiary Logo" 
            class="w-64 h-64 opacity-90 drop-shadow-xl"
          />
        </div>
      </div>
    </header>

    <!-- Subtitle -->
    <div class="container mx-auto px-4 pt-8 pb-4">
      <p class="text-4xl md:text-5xl font-semibold text-amber-800 text-center tracking-wide drop-shadow-sm">
        Pure Local Honey<br>from Our Backyard to Your Table
      </p>
    </div>

    <!-- Intro Text and Production Carousel Side by Side -->
    <div class="container mx-auto px-4 py-8">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 max-w-7xl mx-auto items-center">
        <!-- Production Process Carousel (LEFT) -->
        <div class="relative">
          <!-- Carousel Container -->
          <div class="carousel-container overflow-hidden rounded-2xl shadow-2xl relative bg-gray-900">
            <div class="carousel-track flex transition-transform duration-500 ease-in-out">
              {productionImages.map((img) => (
                <div class="carousel-slide min-w-full">
                  <img 
                    src={img.image} 
                    alt={img.alt}
                    class="w-full h-[520px] object-contain bg-gray-900"
                  />
                </div>
              ))}
            </div>

            <!-- Previous Button -->
            <button 
              id="prev-btn"
              class="absolute left-2 top-1/2 -translate-y-1/2 bg-amber-500/90 hover:bg-amber-600 text-white p-3 rounded-full shadow-lg transition-all duration-300 z-10"
              aria-label="Previous image"
            >
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
              </svg>
            </button>

            <!-- Next Button -->
            <button 
              id="next-btn"
              class="absolute right-2 top-1/2 -translate-y-1/2 bg-amber-500/90 hover:bg-amber-600 text-white p-3 rounded-full shadow-lg transition-all duration-300 z-10"
              aria-label="Next image"
            >
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
              </svg>
            </button>
          </div>

          <!-- Dots Indicator -->
          <div class="flex justify-center gap-2 mt-4">
            {productionImages.map((_, index) => (
              <button 
                class="carousel-dot w-3 h-3 rounded-full bg-amber-300 transition-all duration-300"
                data-index={index}
                aria-label={`Go to slide ${index + 1}`}
              ></button>
            ))}
          </div>
        </div>

        <!-- Description Text (RIGHT) -->
        <div class="bg-white/60 backdrop-blur-sm rounded-3xl shadow-xl p-8">
          <p class="text-gray-700 text-lg leading-relaxed mb-4">
            All of our honey products are from our small backyard apiary in the North Hills (Midtown) area of Raleigh. Honeybees are known for collecting resources up to 3 miles away, so ours are gathering from many different species (depending on what our neighbors have growing in their yards).
          </p>
          <p class="text-gray-700 text-lg leading-relaxed mb-4">
            We like to take a natural approach with our own yard (avoiding lawn or chemical treatments) by growing native plants, and maintaining a garden throughout the year. We vermicompost most of our food waste and also have chickens that help eat food scraps and compost our leaf pile.
          </p>
          <p class="text-gray-700 text-lg leading-relaxed mb-4">
            We collect our honey from smaller boxes on our hives called honey supers. This lets our bees keep anything they collect in the brood and deep boxes (helping them survive throughout the four seasons). The cappings are then scraped off from the honey, and the frames are put into our extractor. The extractor spins out the honey from our frames and it runs down through a sieve that remove chunks of wax or other large particles (like bee parts). From there, the honey goes into bottles or is transformed into creamed honey.
          </p>
          <p class="text-gray-700 text-lg leading-relaxed">
            We do not like to take comb from our bees, so any wax we collect is from inspections where some extra comb is built out in the wrong place or it is collected from our extraction process (when removing the cappings). We use this minimal amount of wax we collect in hand lotion, lip balm, and cutting board oil.
          </p>
        </div>
      </div>
    </div>

    <!-- Products Grid -->
    <div class="container mx-auto px-4 py-8 pb-16">
      <div class="flex flex-nowrap justify-center gap-2 max-w-[1800px] mx-auto">
        {products.map((product) => (
          <div class="product-hexagon-container">
            <div 
              class="product-hexagon-bg"
              style={`background-image: url('${product.image}');`}
            ></div>
            <div class="product-hexagon-border"></div>
            <div class="product-hexagon-content">
              <h3 class="product-title" set:html={product.title}></h3>
              <div class="product-description">
                <p>{product.description}</p>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>

    <!-- Contact Note -->
    <div class="container mx-auto px-4 py-8 pb-16">
      <div class="bg-amber-100/80 backdrop-blur-sm rounded-3xl shadow-xl p-8 max-w-3xl mx-auto text-center">
        <h2 class="text-2xl font-bold text-amber-900 mb-4">Interested in Our Products?</h2>
        <p class="text-gray-700 mb-6">
          We produce limited quantities of honey and honey products based on what our bees provide each season. 
          If you'd like to learn more about availability or place an order, please get in touch!
        </p>
        <a 
          href="/contact" 
          class="inline-block bg-amber-500 hover:bg-amber-600 text-white font-bold py-3 px-8 rounded-full transition-colors duration-300 shadow-lg"
        >
          Contact Us
        </a>
      </div>
    </div>
  </div>

  <style>
    .bee-cursor,
    .bee-cursor * {
      cursor: url('data:image/svg+xml;utf8,<svg xmlns=%22http://www.w3.org/2000/svg%22 width=%2240%22 height=%2240%22 viewBox=%220 0 40 40%22><text y=%2232%22 font-size=%2232%22>üêù</text></svg>') 20 20, auto !important;
    }

    .bg-pattern {
      background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M30 0l25.98 15v30L30 60 4.02 45V15z' fill='%23f59e0b' fill-opacity='0.3' stroke='%23f59e0b' stroke-width='1'/%3E%3C/svg%3E");
      background-size: 60px 60px;
    }

    .product-hexagon-container {
      width: 340px;
      height: 392px;
      position: relative;
    }
    
    .product-hexagon-bg {
      position: absolute;
      inset: 0;
      background-size: cover;
      background-position: center;
      clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
      filter: brightness(0.8);
      transition: filter 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .product-hexagon-border {
      position: absolute;
      inset: -2px;
      background: linear-gradient(135deg, #fbbf24 0%, #f59e0b 100%);
      clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
      z-index: -1;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }
    
    .product-hexagon-content {
      position: absolute;
      inset: 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 2rem;
      z-index: 10;
    }

    .product-title {
      color: white;
      font-weight: bold;
      font-size: 1.75rem;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
      line-height: 1.3;
      transition: opacity 0.3s ease;
    }

    .product-description {
      opacity: 0;
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      transition: opacity 0.3s ease;
      color: white;
      font-size: 1.1rem;
      text-shadow: 2px 2px 4px rgba(0,0,0,0.7);
      padding: 0 1.5rem;
    }

    .product-hexagon-container:hover .product-description {
      opacity: 1;
    }

    .product-hexagon-container:hover .product-title {
      opacity: 0;
    }
    
    .product-hexagon-container:hover .product-hexagon-bg {
      filter: brightness(0.3);
    }
    
    .product-hexagon-container:hover .product-hexagon-border {
      background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%);
      inset: -3px;
    }

    .carousel-dot.active {
      background-color: #f59e0b;
      width: 2rem;
    }

    @media (max-width: 768px) {
      .product-hexagon-container {
        width: 200px;
        height: 230px;
      }
      .product-title {
        font-size: 1rem;
      }
      .product-description {
        font-size: 0.9rem;
        padding: 0 1rem;
      }
      .carousel-slide img {
        height: 300px;
      }
    }
  </style>

  <script>
    let currentSlide = 0;
    const slides = document.querySelectorAll('.carousel-slide');
    const dots = document.querySelectorAll('.carousel-dot');
    const track = document.querySelector('.carousel-track');
    const prevBtn = document.getElementById('prev-btn');
    const nextBtn = document.getElementById('next-btn');
    const totalSlides = slides.length;

    function updateCarousel() {
      track.style.transform = `translateX(-${currentSlide * 100}%)`;
      dots.forEach((dot, index) => {
        dot.classList.toggle('active', index === currentSlide);
      });
    }

    function nextSlide() {
      currentSlide = (currentSlide + 1) % totalSlides;
      updateCarousel();
    }

    function prevSlide() {
      currentSlide = (currentSlide - 1 + totalSlides) % totalSlides;
      updateCarousel();
    }

    nextBtn?.addEventListener('click', nextSlide);
    prevBtn?.addEventListener('click', prevSlide);

    dots.forEach((dot, index) => {
      dot.addEventListener('click', () => {
        currentSlide = index;
        updateCarousel();
      });
    });

    // Auto-scroll every 5 seconds
    let autoScroll = setInterval(nextSlide, 5000);

    // Pause auto-scroll on hover
    const carouselContainer = document.querySelector('.carousel-container');
    carouselContainer?.addEventListener('mouseenter', () => {
      clearInterval(autoScroll);
    });
    carouselContainer?.addEventListener('mouseleave', () => {
      autoScroll = setInterval(nextSlide, 5000);
    });

    // Initialize
    updateCarousel();
  </script>
</BaseLayout>